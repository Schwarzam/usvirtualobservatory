<HTML>

<body>
<script language = 'javascript' src = 'h.js'></script>

<h4>Validation System (Java)</h4><br>
<p>The Validation System is written in Java. The system will validate data in the following way:<br><br>
1.Query our database for n/30 records where n is the total number of records and 30 is the 
average number of days in a month. <br>
2. The records selected in (1) will be in the following order:<br><br>
a) services that have never been validated <br>
b) services with the oldest validation timestamps.<br>
<br>
For a given record type, the Java software will use information in the database to determine which class or classes should be used to handle validation. Each record will then be validated using the appropriate validator. Once the validation is complete, the status of each test (pass, fail,abort, skipped) will be stored in the Tests table.For more information on the structure of the local
validation database, see the section on the database setup.<br><br> </p>


<h4>Validators (NCSA)</h4><br>
<p>
The HEASARC VO validation sytem uses the NCSA validators to get the validation results for each service. It therefore must
call the correct validator on each of the registry records. Right now there are three validators. The Cone, 
SIAP,and Registry validators. The URLs for each are:<br><br>

Cone (baseURL): http://nvo.ncsa.uiuc.edu/dalvalidate/ConeSearchValidater?point=  <br>
SIAP (baseURL): http://nvo.ncsa.uiuc.edu/dalvalidate/SIAValidater?endpoint=       <br>
Registry(baseURL): <br><br>


Each unique record's serviceURL is passed into one of the validators listed above. <br><br> 

Example (SIAP validator input syntax, and actual test url)<br><br>

http://nvo.ncsa.uiuc.edu/dalvalidate/SIAValidater?endpoint={YOURSIAPserviceURL}RA=xx&DEC=yy&RASIZE=xx&DECSIZE=yy&format=xml&show=fail&op=Validate <br><br>

SIAP (example): <br>
 http://nvo.ncsa.uiuc.edu/dalvalidate/SIAValidater?endpoint=http://skyview.gsfc.nasa.gov/cgi-bin/vo/sia.pl?survey=1420MHz&RA=120&DEC=20&RASIZE=.3&DECSIZE=.3&format=xml&show=fail&op=Validate <br> <br>


The results of the validation are in XML and must be parsed so that we can determine if the test passed or failed. The parsed
results are then evaluated and stored in the local database. <br><br>


<h4>Some Important Java Classes</h4>
<p> Test.java  - contains main and runs the system<br>
Cone, SIAP, Registry, SSA.java - individual classes handling each service type<br>
ValidatorResponseParser, MyContentHandler.java - parses the XML responses generated by the Validators<br>
DumpToDb - uses classes that will write validation results to the local database<br>
Pass,Failed,Skip.java - classes to handle different status types.<br>
Service.java - parent class of service types.<br>
WebFile.java and nom directory -handles processing different image types (used in conjuction with SIAP validation)

<h4>Running the Validation System Manually</h4>
<p>
<b>(Default)</b> Run the system on a fixed number of services in the db. The number validated is defined in the "number_to_validate"
file stored in the data directory.<br><br>

./java Test    <br><br>

<b>(Running on individual resource)</b><br><br>

./java Test ivo://foo.test <br><br>

<b>(Running on individual resource. dump to screen, not db)</b><br><br>

./java Test toscreen  ivo://foo.center <br><br>

<b>(Running on resource, forcing pass, fail,etc. and storing in the db)</b><br><br>

Set the processing status ("Active","pass","skip") in the "status" column of the MySQL validation Test table.<br>
N.B. "Active" is the default processing status.<br><br>
Then run the validation sw on an individual service. The code will determine how to proceed based on
the status column's value of the Test table. <br><br>
E.g.
./java Test  ivo://foo.center 


<hr align="left" noshade>
        <table width="100%"  border="0" align="center" cellpadding="4" cellspacing="0">
        <tr align="center" valign="top">   <td width="16%" valign="top"><div align="center" class="style10">
        <a href="http://www.nsf.gov"><img src="http://www.us-vo.org/images/nsf_logo.gif" alt="NSF HOME" width="50" height="50" border="0">
        </a>
        <a href="http://www.nasa.gov"><img src="http://www.us-vo.org/images/nasa_logo_sm.gif" alt="NASA HOME" width="50" height="47" border="0">
        </a>
        </div></td>
        <td width="76%"><div align="center">       
        <p class="style10"> Developed with the support of the <a href="http://www.nsf.gov">National Science Foundation</a> 
        <br>          under Cooperative Agreement AST0122449 with the Johns Hopkins University 
        <br>         The NVO is a member of the <a href="http://www.ivoa.net">International Virtual Observatory Alliance</a></p>
        <p class="style10">This NVO Application is hosted by <a href="#">LocalSiteName</a></p>
        </div></td>    
        <td width="8%"><div align="center"><span class="tiny">Member<br>
        </span>
        <a href="http://www.ivoa.net">
        <img src="http://www.us-vo.org/images/ivoa_small.jpg" alt="IVOA HOME" width="68" height="39" border="0" align="top"></a></div></td>
        <td width="8%"><span class="style4"><span class="tiny">Meet the Developers</span><br>
        <img src="http://www.us-vo.org/images/bee_hammer.gif" alt="MEET THE DEVELOPERS" width="50" border=0></span></td> </tr></table>
        <hr noshade='noshade' />
        <p>Hosted by the <a href='http://universe.gsfc.nasa.gov/'>Astrophysics Science Division</a>and the 
        <a href='http://heasarc.gsfc.nasa.gov/'>High Energy Astrophysics Science Archive Research Center (HEASARC)</a>at
        <a href='http://www.nasa.gov/'>NASA/</a><a href='http://www.gsfc.nasa.gov/'>GSFC</a>
        </p><p>HEASARC Director:
        <a href='http://heasarc.gsfc.nasa.gov/docs/bios/white.html'>Dr. Nicholas E. White</a>,</p>
        <p>HEASARC Associate Director: Dr. Roger Brissenden,</p><p>Responsible NASA Official:
        <a href='http://heasarc.gsfc.nasa.gov/docs/nospam/panewman.html'>Phil Newman</a> </p>
        <p class='tiny'> <a href='/banner.html'>Privacy, Security, Notices</a></p>
        </div><!-- id='footer' --></body>
   


</p>





</p>
</body>

</HTML>
