<project name="spring-anyOpenID" basedir="." default="deploy">

  <property name="debug" value="true"/>
  <property name="dir.pkg.parent" value="../../.." />
  <import file="${dir.pkg.parent}/build-layout.xml" as="lo"/>

  <property name="pkg.name" value="spring-anyOpenID"/>
  <property name="pkg.version" value="1.0pre"/>

  <property name="target.war" value="${pkg.name}.war"/>
  <property name="target.war.path" value="${basedir}/${target.war}"/>

  <property name="pkg.parent.name" value="vaologin"/>
  <property name="dir.pkg.parent.lib" value="${dir.pkg.parent}/lib"/>
  <property name="dir.pkg.parent.lib.jars" value="${dir.pkg.parent.lib}/jars"/>
  <property name="dir.src.jsp" value="${dir.src}/main/jsp"/>
  <property name="dir.src.html" value="${dir.src}/main/html"/>

  <target name="init" depends="lo.initOutputDirs">
  </target>

  <target name="build" depends="war"/>
  <target name="assemble" depends="init"/>

  <target name="war" depends="assemble">
    <war destfile="${target.war.path}" webxml="${dir.conf}/web.xml">
      <webinf dir="${basedir}/WEB-INF"/>
      <webinf file="${dir.conf}/security-app-context.xml"/>
      <lib dir="${dir.lib}"/>
      <lib dir="${basedir}/../lib"/>
      <lib dir="${dir.pkg.parent.lib}">
        <include name="${pkg.parent.name}*.jar" />
      </lib>
      <lib dir="${dir.pkg.parent.lib.jars}">
        <exclude name="servlet-api.jar" />
      </lib>
      <classes file="${dir.conf}/log4j.properties"/>
      <fileset dir="${dir.src.jsp}"/>
      <fileset dir="${dir.src.html}"/>
    </war>
  </target>

  <target name="clean" depends="lo.cleanOutputDirs"/>
  <target name="distclean" depends="lo.distCleanOutputDirs">
    <delete file="${target.war.path}"/>
  </target>

</project>
